/* =========================================
   Mobile Responsive Styles
   All mobile overrides in one place
   ========================================= */

/* Touch hint for mobile */
.episteme-touch-hint {
	text-align: center;
	font-size: 12px;
	color: var(--text-muted);
	padding: 8px;
	margin-bottom: 8px;
}

/* Mobile-specific adjustments */
@media screen and (max-width: 600px) {
	/* Settings panel - fix overflow */
	.episteme-api-input {
		width: 100%;
		max-width: 100%;
	}

	/* Review card container - adjusted padding for mobile */
	.episteme-review-card-container {
		padding: 8px;
	}

	/* Mobile: minimal padding during edit mode */
	.episteme-review-card-container--editing {
		padding: 2px;
	}

	.episteme-review-card {
		max-width: 100%;
	}

	/* Question and answer - slightly smaller fonts on mobile */
	.episteme-review-question {
		font-size: 1.2em;
	}

	.episteme-review-answer {
		font-size: 1em;
	}

	/* Source note backlink */
	.episteme-review-backlink {
		margin-top: 12px;
	}

	.episteme-review-backlink-link {
		font-size: 0.85em;
	}

	/* Rating buttons - minimal padding for mobile */
	.episteme-review-buttons {
		padding: 8px 4px;
		gap: 4px;
	}

	.episteme-btn {
		padding: 14px 12px;
		min-width: auto;
		min-height: 60px;
		flex: 1;
	}

	.episteme-btn-show {
		padding: 20px 32px;
		flex: none;
	}

	/* Menu button - mobile */
	.episteme-btn-menu {
		width: 44px;
		height: 44px;
	}

	/* Deck selection modal */
	.episteme-deck-modal {
		min-width: auto;
		width: 100%;
	}

	/* Statistics view adjustments */
	.episteme-stats {
		padding: 12px;
	}

	.stats-today-grid {
		grid-template-columns: repeat(2, 1fr);
	}

	.stats-chart-container {
		height: 180px;
	}

	.stats-counts-row {
		flex-direction: column;
		gap: 16px;
	}

	.stats-chart-container-small {
		width: 150px;
		height: 150px;
		margin: 0 auto;
	}

	/* Calendar heatmap - smaller cells */
	.stats-calendar-cell {
		width: 8px;
		height: 8px;
	}

	/* Panel styles */
	.episteme-panel {
		padding: 12px;
	}

	/* Card preview in panel */
	.episteme-card {
		padding: 12px;
	}

	/* Review summary stats grid */
	.episteme-review-stats {
		grid-template-columns: repeat(2, 1fr);
	}

	.episteme-review-summary {
		padding: 24px 16px;
	}

	/* Header stat badges - smaller on mobile */
	.episteme-review-stat-badge {
		min-width: 18px;
		height: 18px;
		font-size: 10px;
	}

	/* Card preview modal - mobile adjustments */
	.episteme-card-preview-modal {
		width: 95vw;
		max-width: none;
	}

	.episteme-card-preview-list {
		max-height: 50vh;
	}

	.episteme-card-preview-footer {
		flex-direction: column;
		gap: 8px;
		align-items: flex-start;
	}

	.episteme-card-preview-source {
		max-width: 100%;
	}

	.episteme-card-preview-open-btn {
		width: 100%;
	}
}

/* Extra small screens (iPhone SE, etc.) */
@media screen and (max-width: 375px) {
	.episteme-review-question {
		font-size: 1.1em;
	}

	.episteme-review-buttons {
		gap: 4px;
	}

	.episteme-btn {
		padding: 12px 8px;
		min-width: auto;
		flex: 1;
	}

	.stats-today-grid {
		grid-template-columns: 1fr;
	}
}

/* iOS-specific safe area handling */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
	.episteme-review-buttons:not([style*="display: none"]) {
		padding-bottom: calc(12px + env(safe-area-inset-bottom));
	}

	/* No extra safe area padding when editing */
	.episteme-review-card-container--editing ~ .episteme-review-buttons {
		padding-bottom: 8px;
	}
}

/* Mobile edit mode - handle iOS keyboard properly */
@media screen and (max-width: 600px) {
	.episteme-review-card-container--editing {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		z-index: 100;
		background: var(--background-primary);
		padding: 16px;
		overflow-y: auto;
		-webkit-overflow-scrolling: touch;
	}

	.episteme-review-card-container--editing .episteme-review-card {
		max-width: 100%;
		padding-bottom: 300px; /* Extra space for keyboard */
	}

	.episteme-review-card-container--editing .episteme-review-editable {
		font-size: 16px; /* Prevent iOS zoom on focus */
	}
}

/* Larger touch targets for all interactive elements on touch devices */
@media (hover: none) and (pointer: coarse) {
	.episteme-card-btn {
		padding: 8px 12px;
		font-size: 14px;
	}

	.episteme-open-btn {
		padding: 8px 12px;
	}

	.episteme-btn-primary,
	.episteme-btn-secondary {
		padding: 12px 16px;
	}

	.stats-range-btn {
		padding: 10px 16px;
	}
}
